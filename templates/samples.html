{% extends "base.html" %}
{% set active_page = "samples" %}

{% block title %}LineAgeMap — Samples{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/home-extra.css') }}" />
{% endblock %}

{% block content %}
  <div class="appFrameShell">
    <div class="appFrameCard">
  <section class="panel" style="max-width:1020px;margin:0 auto;">
    <div style="display:flex;align-items:flex-end;justify-content:space-between;gap:14px;flex-wrap:wrap;">
      <div>
        <h1 style="margin:0 0 6px;">Samples</h1>
        <p style="margin:0;opacity:.85;">See what Tree, Timeline, and Map look like before you build your own.</p>
      </div>
      <div style="display:flex;gap:10px;align-items:center;">
        {% if not current_user %}
          <a class="btn ghost" href="{{ url_for('login') }}">Login</a>
          <a class="btn primary" href="{{ url_for('register') }}">Register</a>
        {% endif %}
      </div>
    </div>

    <!-- Bigger feature cards than the home page -->
    <section class="homePreviewRow" style="margin-top:18px;">
      <article class="homePreviewCard" style="min-height: 420px;">
        <header class="homePreviewHead"><h2>Tree</h2></header>
        <div style="padding:10px 14px 0;opacity:.85;">Clear structure, easy to read.</div>
        <div style="padding:12px 14px 4px;">
          <svg id="treePreviewSvg" class="treePreviewSvg" aria-label="Tree preview"></svg>
        </div>
        <div style="display:flex;gap:10px;justify-content:space-between;padding:14px;flex-wrap:wrap;">
          <a class="homePreviewCta" style="flex:1;min-width:160px;text-align:center;" href="{{ url_for('tree_view') }}?sample=got">See more →</a>
        </div>
      </article>

      <article class="homePreviewCard" style="min-height: 420px;">
        <header class="homePreviewHead"><h2>Timeline</h2></header>
        <div style="padding:10px 14px 0;opacity:.85;">A single story line through time.</div>
        <div style="padding:12px 14px 4px;">
          <div id="timelinePreview" class="timelinePreview" aria-label="Timeline preview"></div>
        </div>
        <div style="display:flex;gap:10px;justify-content:space-between;padding:14px;flex-wrap:wrap;">
          <a class="homePreviewCta" style="flex:1;min-width:160px;text-align:center;" href="{{ url_for('timeline_view') }}?sample=got">See more →</a>
        </div>
      </article>

      <article class="homePreviewCard" style="min-height: 420px;">
        <header class="homePreviewHead"><h2>Map</h2></header>
        <div style="padding:10px 14px 0;opacity:.85;">Explore places and clusters.</div>
        <div style="padding:12px 14px 4px;">
          <div class="mapPreview" style="height: 220px;" aria-label="Map preview">
            <div class="mapPreviewInner">Explore locations</div>
          </div>
        </div>
        <div style="display:flex;gap:10px;justify-content:space-between;padding:14px;flex-wrap:wrap;">
          <a class="homePreviewCta" style="flex:1;min-width:160px;text-align:center;" href="{{ url_for('map_view') }}?sample=got">See more →</a>
        </div>
      </article>
    </section>

    <hr style="border:none;border-top:1px solid rgba(120,92,70,.18);margin: 18px 0 14px;" />

    <div style="display:flex;align-items:flex-end;justify-content:space-between;gap:14px;flex-wrap:wrap;">
      <div>
        <h2 style="margin:0 0 6px;">Example families</h2>
        <p style="margin:0;opacity:.85;">Open a full sample dataset in any view.</p>
      </div>
    </div>

    <div class="homePreviewRow" style="margin-top:14px;">
      {% for s in samples %}
        <article class="homePreviewCard sampleFamilyCard">
          <header class="homePreviewHead">
            <h3 style="margin:0;">{{ s.title }}</h3>
          </header>
          <div style="padding:10px 14px 0;opacity:.88;">{{ s.subtitle }}</div>

          <div class="sampleFamilyBtns" style="display:flex;gap:10px;justify-content:space-between;padding:14px;flex-wrap:wrap;">
            <a class="homePreviewCta" href="{{ url_for('tree_view') }}?sample={{ s.id }}">Tree</a>
            <a class="homePreviewCta" href="{{ url_for('timeline_view') }}?sample={{ s.id }}">Timeline</a>
            <a class="homePreviewCta" href="{{ url_for('map_view') }}?sample={{ s.id }}">Map</a>
            <a class="homePreviewCta" href="{{ url_for('tree_view') }}?sample={{ s.id }}" style="flex:1;text-align:center;">See more →</a>
          </div>
        </article>
      {% endfor %}
    </div>
  </section>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script>
    window.TREE_PREVIEW_DATA = {{ tree_preview|tojson }};
    window.TIMELINE_PREVIEW_DATA = {{ timeline_preview|tojson }};
  </script>
  <script src="{{ url_for('static', filename='js/home-previews.js') }}"></script>
{% endblock %}
